<!DOCTYPE html>
<html>
	<head>
        <meta charset="utf-8" />
		<title>performancetimingapi</title>
		<script>
			function getPerformanceTimingData(performanceObj) {
				var retObj = {};
				retObj.navigationStart            = performanceObj.navigationStart;
				retObj.domLoading                 = performanceObj.domLoading;
				retObj.domInteractive             = performanceObj.domInteractive;
				retObj.domContentLoadedEventStart = performanceObj.domContentLoadedEventStart;
				retObj.domContentLoadedEventEnd   = performanceObj.domContentLoadedEventEnd;
				retObj.domComplete                = performanceObj.domComplete;
				retObj.loadEventStart             = performanceObj.loadEventStart;
				retObj.loadEventEnd               = performanceObj.loadEventEnd;
				retObj.requestStart               = performanceObj.requestStart;
				retObj.responseStart              = performanceObj.responseStart;
				retObj.responseEnd                = performanceObj.responseEnd;
				return retObj;
			}

			window.onload = () => {
				var prePerformanceTiming = document.getElementById('performance_timing');
				var preIframePerformanceTiming = document.getElementById('iframe_performance_timing');

				var iframe = document.getElementById('iframe');

				prePerformanceTiming.textContent = JSON.stringify(getPerformanceTimingData(window.performance.timing), undefined, 2);
				preIframePerformanceTiming.textContent = JSON.stringify(getPerformanceTimingData(iframe.contentWindow.performance.timing), undefined, 2);
			};

		</script>
	</head>
	<body>
		<pre id="performance_timing">
		</pre>
		<div id="iframe_test" style="border: solid 1px black">
			<p>This iframe is used to test how many times of SetRequestStart called.</p>
			<iframe id="iframe"
					src="resources/blank_page_green.html"
					style="width: 250px; height: 250px;"></iframe>
			<pre id="iframe_performance_timing">
			</pre>
		</div>
	</body>
</html>
